/*! For license information please see load_users.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/assets/scripts/common/alertBox.js":module=>{eval("module.exports = function () {\n  var yes_btn = document.createElement('button');\n  var no_btn = document.createElement('button');\n  yes_btn.textContent = \"Yes\";\n  no_btn.textContent = \"No\";\n  var alert_div = document.createElement('div');\n  alert_div.textContent = \"Are you sure?\";\n  alert_div.appendChild(yes_btn);\n  alert_div.appendChild(no_btn);\n  return alert_div;\n};\n\n//# sourceURL=webpack://crud-app/./src/assets/scripts/common/alertBox.js?")},"./src/assets/scripts/common/event.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var alertBox = __webpack_require__(/*! ./alertBox */ "./src/assets/scripts/common/alertBox.js");\nvar _require = __webpack_require__(/*! ./other */ "./src/assets/scripts/common/other.js"),\n  createUser = _require.createUser,\n  displayUser = _require.displayUser,\n  saveUsers = _require.saveUsers,\n  getUsers = _require.getUsers,\n  changeUserName = _require.changeUserName,\n  getIndexUserById = _require.getIndexUserById;\nvar eventDo = function eventDo(eventName, data) {\n  var events = getEvents();\n  events.push(JSON.stringify({\n    eventName: eventName,\n    data: data\n  }));\n  saveEvents(events);\n};\nvar eventRemove = function eventRemove() {\n  var events = getEvents();\n  var last_event = JSON.parse(events.pop());\n  switch (last_event.eventName) {\n    case "create user":\n      saveEvents(events);\n      var users1 = getUsers();\n      users1.splice(getIndexUserById(last_event.data.id), 1);\n      saveUsers(users1);\n      document.querySelector(\'ul\').removeChild(document.querySelector(\'ul\').lastChild);\n      break;\n    case "delete user":\n      saveEvents(events);\n      createUser(last_event.data.name, last_event.data.id);\n      var users2 = getUsers();\n      document.querySelector(\'ul\').appendChild(displayUser(users2[users2.length - 1]));\n      break;\n    case "change user":\n      saveEvents(events);\n      var old_name = last_event.data.old_name;\n      changeUserName(getIndexUserById(last_event.data.id), old_name);\n      document.querySelector(\'ul\').childNodes[getIndexUserById(last_event.data.id)].childNodes[0].textContent = "| id: ".concat(last_event.data.id, " | name: ").concat(old_name, " |");\n      break;\n    default:\n      break;\n  }\n  setRemoveEvent(last_event);\n};\nvar eventRemoveBack = function eventRemoveBack() {\n  var remove_event = getRemoveEvent();\n  localStorage.removeItem("remove_event");\n  var events = getEvents();\n  events.push(JSON.stringify(remove_event));\n  saveEvents(events);\n  switch (remove_event.eventName) {\n    case "create user":\n      var new_id = createUser(remove_event.data.name, remove_event.data.id);\n      var users1 = getUsers();\n      var user1 = users1[getIndexUserById(new_id)];\n      var ul = document.querySelector(\'ul\');\n      var li = displayUser(users1[users1.length - 1]);\n      ul.appendChild(li);\n      li.childNodes[2].addEventListener("click", function () {\n        var alert_div = alertBox();\n        document.getElementById(\'alert_block\').appendChild(alert_div);\n        document.getElementById(\'alert_block\').style.padding = "10px 0";\n        var remove_alert = function remove_alert() {\n          alert_div.remove();\n          document.getElementById(\'alert_block\').style.padding = "0";\n        };\n        alert_div.childNodes[1].addEventListener("click", function () {\n          users1.splice(users1.indexOf(JSON.stringify(user1)), 1);\n          eventDo("delete user", {\n            id: user1.id,\n            name: user1.name\n          });\n          localStorage.setItem("users", JSON.stringify(users1));\n          ul.removeChild(li);\n          remove_alert();\n        });\n        alert_div.childNodes[2].addEventListener("click", function () {\n          remove_alert();\n        });\n      });\n      break;\n    case "delete user":\n      var users2 = getUsers();\n      users2.splice(getIndexUserById(remove_event.data.id), 1);\n      saveUsers(users2);\n      document.querySelector(\'ul\').removeChild(document.querySelector(\'ul\').lastChild);\n      break;\n    case "change user":\n      var new_name = remove_event.data.new_name;\n      changeUserName(getIndexUserById(remove_event.data.id), new_name);\n      document.querySelector(\'ul\').childNodes[getIndexUserById(remove_event.data.id)].childNodes[0].textContent = "| id: ".concat(remove_event.data.id, " | name: ").concat(new_name, " |");\n      break;\n    default:\n      break;\n  }\n};\nvar getEvents = function getEvents() {\n  return localStorage.getItem(\'events\') ? JSON.parse(localStorage.getItem(\'events\')) : [];\n};\nvar saveEvents = function saveEvents(events) {\n  localStorage.setItem(\'events\', JSON.stringify(events));\n};\nvar getRemoveEvent = function getRemoveEvent() {\n  return localStorage.getItem(\'remove_event\') ? JSON.parse(localStorage.getItem(\'remove_event\')) : [];\n};\nvar setRemoveEvent = function setRemoveEvent(remove_event) {\n  localStorage.setItem(\'remove_event\', JSON.stringify(remove_event));\n};\nmodule.exports = {\n  eventDo: eventDo,\n  eventRemove: eventRemove,\n  getEvents: getEvents,\n  getRemoveEvent: getRemoveEvent,\n  eventRemoveBack: eventRemoveBack\n};\n\n//# sourceURL=webpack://crud-app/./src/assets/scripts/common/event.js?')},"./src/assets/scripts/common/other.js":module=>{eval('function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar createUser = function createUser(name) {\n  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 9999;\n  var users = localStorage.getItem(\'users\') ? JSON.parse(localStorage.getItem(\'users\')) : [];\n  var new_id;\n  if (id === 9999) {\n    console.log(1);\n    new_id = users.length ? users[users.length - 1].id + 1 : 1;\n  } else {\n    new_id = id;\n  }\n  users.push({\n    id: new_id,\n    name: name\n  });\n  localStorage.setItem("users", JSON.stringify(users));\n  return new_id;\n};\nvar displayUser = function displayUser(user) {\n  var li = document.createElement(\'li\');\n  li.textContent = "| id: ".concat(user.id, " | name: ").concat(user.name, " |");\n  var to_change_user_btn = document.createElement("button");\n  to_change_user_btn.textContent = "change";\n  var form = document.createElement("form");\n  form.action = "./change_user.html";\n  var input1 = document.createElement("input");\n  input1.type = "hidden";\n  input1.name = "change_user_type";\n  input1.value = "change";\n  var input2 = document.createElement("input");\n  input2.type = "hidden";\n  input2.name = "user_id";\n  input2.value = user.id;\n  var delete_btn = document.createElement("button");\n  delete_btn.textContent = "delete";\n  form.appendChild(input1);\n  form.appendChild(input2);\n  form.appendChild(to_change_user_btn);\n  li.appendChild(form);\n  li.appendChild(delete_btn);\n  return li;\n};\nvar changeUserName = function changeUserName(index, name) {\n  var users = getUsers();\n  var change_user = users[index];\n  change_user.name = name;\n  users[index] = change_user;\n  saveUsers(users);\n};\nvar getIndexUserById = function getIndexUserById(id) {\n  var users = getUsers();\n  return users.indexOf.apply(users, _toConsumableArray(users.filter(function (user) {\n    return user.id == id;\n  })));\n};\nvar getUsers = function getUsers() {\n  if (localStorage.getItem(\'users\')) {\n    if (JSON.parse(localStorage.getItem(\'users\')).length) {\n      return JSON.parse(localStorage.getItem(\'users\'));\n    }\n    return [JSON.parse(localStorage.getItem(\'users\'))];\n  }\n  return [];\n};\nvar saveUsers = function saveUsers(users) {\n  localStorage.setItem(\'users\', JSON.stringify(users));\n};\nmodule.exports = {\n  createUser: createUser,\n  displayUser: displayUser,\n  getUsers: getUsers,\n  saveUsers: saveUsers,\n  changeUserName: changeUserName,\n  getIndexUserById: getIndexUserById\n};\n\n//# sourceURL=webpack://crud-app/./src/assets/scripts/common/other.js?')},"./src/assets/scripts/load_users.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval('var alertBox = __webpack_require__(/*! ./common/alertBox */ "./src/assets/scripts/common/alertBox.js");\nvar _require = __webpack_require__(/*! ./common/event */ "./src/assets/scripts/common/event.js"),\n  eventDo = _require.eventDo,\n  eventRemove = _require.eventRemove,\n  getEvents = _require.getEvents,\n  getRemoveEvent = _require.getRemoveEvent,\n  eventRemoveBack = _require.eventRemoveBack;\nvar _require2 = __webpack_require__(/*! ./common/other */ "./src/assets/scripts/common/other.js"),\n  displayUser = _require2.displayUser,\n  getUsers = _require2.getUsers,\n  getIndexUserById = _require2.getIndexUserById;\nvar load_users = function load_users() {\n  if (!getEvents().length) {\n    document.getElementById("back_btn").disabled = true;\n  }\n  if (!getRemoveEvent().length) {\n    document.getElementById("remove_back_btn").disabled = true;\n  }\n  console.log("load users...");\n  var users = getUsers();\n  var ul = document.querySelector(\'ul\');\n  users.forEach(function (user) {\n    var li = displayUser(user);\n    ul.appendChild(li);\n    li.childNodes[2].addEventListener("click", function () {\n      var alert_div = alertBox();\n      document.getElementById(\'alert_block\').appendChild(alert_div);\n      document.getElementById(\'alert_block\').style.padding = "10px 0";\n      var remove_alert = function remove_alert() {\n        alert_div.remove();\n        document.getElementById(\'alert_block\').style.padding = "0";\n      };\n      alert_div.childNodes[1].addEventListener("click", function () {\n        users.splice(getIndexUserById(user.id), 1);\n        eventDo("delete user", {\n          id: user.id,\n          name: user.name\n        });\n        localStorage.setItem("users", JSON.stringify(users));\n        ul.removeChild(li);\n        remove_alert();\n      });\n      alert_div.childNodes[2].addEventListener("click", function () {\n        remove_alert();\n      });\n    });\n  });\n};\nload_users();\ndocument.getElementById("back_btn").addEventListener("click", function () {\n  if (getEvents().length && getEvents()) {\n    eventRemove();\n  }\n  if (!getEvents().length) {\n    document.getElementById("back_btn").disabled = true;\n    localStorage.removeItem("users");\n  }\n  document.getElementById("remove_back_btn").disabled = false;\n});\ndocument.getElementById("remove_back_btn").addEventListener("click", function () {\n  if (getRemoveEvent()) {\n    eventRemoveBack();\n  }\n  if (!getRemoveEvent().length) {\n    document.getElementById("remove_back_btn").disabled = true;\n  }\n});\n\n//# sourceURL=webpack://crud-app/./src/assets/scripts/load_users.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}var __webpack_exports__=__webpack_require__("./src/assets/scripts/load_users.js")})();